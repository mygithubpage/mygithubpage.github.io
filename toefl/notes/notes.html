<!DOCTYPE html>
<html>

<head>
  <title>My TOEFL Notes</title>
  <script src="/initialize.js"></script>
</head>

<body class="w3-light-gray">

  
  <main class="w3-container">

    <!-- Labels / tags -->
    <div id="tagDiv">

      <div class="w3-padding w3-card w3-black w3-large">
        <span>Tags</span>
      </div>

      <div class="w3-padding w3-card w3-white" id="tagsDiv">
      </div>

    </div>
    
    <!-- Blog entries -->
    <div id="entries">
      
      <!-- Blog entry -->
      <div class="w3-card w3-padding w3-margin-top w3-white my-entry">

        <div>
          <h3><b>OG Example Independent Writing</b></h3>
          <p>Do you agree or disagree with the following statement?<br/>
              <b>Always telling the truth is the most important consideration in any relationship.</b><br/>
            Use specific reasons and examples to support your answer.</p>
        </div>

        <!-- Ariticle tags -->
        <div class="w3-white">
          <span>Tags:</span>
          <a class="w3-tag w3-light-gray w3-btn w3-padding-small my-margin-top-small">Writing</a>
          <a class="w3-tag w3-light-gray w3-btn w3-padding-small my-margin-top-small">Independent</a>
          <a class="w3-tag w3-light-gray w3-btn w3-padding-small my-margin-top-small">Trait</a>        
        </div>

        <div>
          <p><a class="w3-button w3-padding w3-white w3-border" href="og-example-writing2.html">
            <b>READ MORE</b>
          </a></p>
        </div>

      </div><!-- END BLOG ENTRY -->
        
      <!-- Blog entry -->
      <div class="w3-card w3-padding w3-margin-top w3-white my-entry">

        <div>
          <h3><b>OG Example Integrated Writing</b></h3>
        </div>

        <!-- Ariticle tags -->
        <div class="w3-white">
          <span>Tags:</span>
          <a class="w3-tag w3-light-gray w3-btn w3-padding-small my-margin-top-small">Writing</a>
          <a class="w3-tag w3-light-gray w3-btn w3-padding-small my-margin-top-small">Integrated</a>       
        </div>

        <div>
          <p><a class="w3-button w3-padding w3-white w3-border" href="og-example-writing1.html">
            <b>READ MORE</b>
          </a></p>
        </div>

      </div><!-- END BLOG ENTRY -->

      <!-- Blog entry -->
      <div class="w3-card w3-padding w3-margin-top w3-white my-entry">

        <div>
          <h3><b>Sample Question Independent Writing</b></h3>
          <p>Do you agree or disagree with the following statement?<br />
            <b>A teacher's ability to relate well with students is more important than excellent knowledge of the subject being taught.</b><br/>
            Use specific reasons and examples to support your answer.</p>
        </div>

        <!-- Ariticle tags -->
        <div class="w3-white">
          <span>Tags:</span>
          <a class="w3-tag w3-light-gray w3-btn w3-padding-small my-margin-top-small">Writing</a>
          <a class="w3-tag w3-light-gray w3-btn w3-padding-small my-margin-top-small">Independent</a>
          <a class="w3-tag w3-light-gray w3-btn w3-padding-small my-margin-top-small">Comparative</a>        
        </div>

        <div>
          <p><a class="w3-button w3-padding w3-white w3-border" href="sample-question-writing2.html">
            <b>READ MORE</b>
          </a></p>
        </div>

      </div><!-- END BLOG ENTRY -->

      <!-- Blog entry -->
      <div class="w3-card w3-padding w3-margin-top w3-white my-entry">

        <div>
          <h3><b>Sample Question Integrated Writing</b></h3>
        </div>

        <!-- Ariticle tags -->
        <div class="w3-white">
          <span>Tags:</span>
          <a class="w3-tag w3-light-gray w3-btn w3-padding-small my-margin-top-small">Writing</a>
          <a class="w3-tag w3-light-gray w3-btn w3-padding-small my-margin-top-small">Integrated</a>       
        </div>

        <div>
          <p><a class="w3-button w3-padding w3-white w3-border" href="sample-question-writing1.html">
            <b>READ MORE</b>
          </a></p>
        </div>

      </div><!-- END BLOG ENTRY -->

      <!-- Blog entry -->
      <div class="w3-card w3-padding w3-margin-top w3-white my-entry">

        <div>
          <h3><b>Performance Feedback</b></h3>
        </div>

        <!-- Ariticle tags -->
        <div class="w3-white">
          <span>Tags:</span>
          <a class="w3-tag w3-light-gray w3-btn w3-padding-small my-margin-top-small">Performance</a> 
        </div>

        <div>
          <p><a class="w3-button w3-padding w3-white w3-border" href="performance-feedback.html">
            <b>READ MORE</b>
          </a></p>
        </div>

      </div><!-- END BLOG ENTRY -->

      <!-- Blog entry -->
      <div class="w3-card w3-padding w3-margin-top w3-white my-entry">

          <div>
            <h3><b>Scoring Rubric</b></h3>
          </div>
  
          <!-- Ariticle tags -->
          <div class="w3-white">
            <span>Tags:</span>
            <a class="w3-tag w3-light-gray w3-btn w3-padding-small my-margin-top-small">Scoring</a>       
          </div>
  
          <div>
            <p><a class="w3-button w3-padding w3-white w3-border" href="scoring-rubric.html">
              <b>READ MORE</b>
            </a></p>
          </div>
  
        </div><!-- END BLOG ENTRY -->

    </div><!-- END BLOG ENTRIES -->

  </main>

  <script>

    var barItems = document.querySelectorAll("a.w3-bar-item");
    var tags = document.querySelectorAll('a.w3-tag'); // All tags in all entries.
    var tagsDiv = document.querySelector('#tagsDiv'); // Place to add tags
    var tagsArray = []; // All tags need to be show in tag div on load.
    var selectedTags = []; // Add element when a tag is selected in tag div. otherwise remove it.    

    // Filter multiple tags
    function toggleFilter(thisElem) {

      // Add selected tag to array
      if (thisElem.className.indexOf('w3-light-gray') > 0) {
        selectedTags.push(thisElem.textContent);
      } else {
        selectedTags.splice(selectedTags.indexOf(thisElem.textContent), 1);
      }

      // Unselected Tag is light gray, selected tag is black
      thisElem.classList.toggle('w3-light-gray');

      let entries = document.querySelectorAll(".my-entry");
      let entriesTagsArray = [];

      // if the entry do not contains selected tags, it is hidden.
      entries.forEach(entry => {
        
        // get the entries tag
        let entryTags = entry.querySelectorAll("a.w3-tag");
        let entryTagsArray = []; // one entry's tags.
        entry.classList.remove("w3-hide");

        // join the entry tag in one string
        entryTags.forEach(element => { 
          entryTagsArray.push(element.textContent);
          if(element.textContent === thisElem.textContent) {
            element.classList.toggle('w3-light-gray');
          }
        });

        // if one selected tag is not in the entryTagsArray, the entry is hidden
        selectedTags.forEach( tag => {
          if(entryTagsArray.indexOf(tag) === -1) { 
            entry.classList.add("w3-hide"); 
          } 
        }); // End of selectedTags foreach  

        // if the entry is not hidden
        if (!entry.classList.contains("w3-hide")) {
          entryTagsArray.forEach(element => { entriesTagsArray.push(element) } );
          tagBtns.forEach(element => {
              element.classList.remove("w3-hide");
            if (entriesTagsArray.indexOf(element.textContent) === -1) {
              element.classList.add('w3-hide');
            }
          }); // End of tag Buttons forEach

        }
      }); // End of entries foreach

    }

    // Trigger tag click event
    function clickTag(tag) {
      tagBtns.forEach(element => {
        if(element.textContent === tag) {
          element.click();
        }
      });
    }

    // Show tags
    tags.forEach(tag => {
      element = tag.textContent;
      if(tagsArray.indexOf(element) === -1){
        tagsArray.push(element);
        var btn = document.createElement('button');
        btn.className = "w3-tag w3-light-gray w3-btn w3-padding-small my-margin-small";
        
        btn.textContent = element;
        tagsDiv.appendChild(btn);
      }
    });

    // Add filter Event for tags in tag div. 
    var tagBtns = document.querySelectorAll("#tagsDiv > button.w3-tag");
    tagBtns.forEach(element => {
      element.addEventListener('click', function() {
        toggleFilter(element);
      });
    });

    // Add top bar item tag.
    barItems.forEach(element => {
      element.addEventListener('click', function() {clickTag(element.textContent)} );
    });

    // Add article tag.
    tags.forEach(element => {
      element.addEventListener('click', function() {clickTag(element.textContent)} );
    });
    
    // Filter Tag
    var tag = sessionStorage.getItem('tag');
    if (tag) { clickTag(tag); }
  
    // Add Sidebar Button and Click Event
    /*window.addEventListener("load", function() { 
      addSiderbarBtn();
      sidebar.innerHTML = tagsDiv.innerHTML;
      sidebarItems = document.querySelectorAll("#sidebar > button");
      sidebarItems.forEach(element => {
        element.addEventListener('click', function() {
          toggleFilter(element);
        });
      });
    });*/

  </script>

</body>

</html>